{% extends "base.html" %} 

{% block title %}Bagaje Abandonate{% endblock %} 

{% block content %}
  <form method="POST" enctype="multipart/form-data" id="form">
    <div class="p-4">
      <input
        class="form-control form-control-lg"
        id="video_file"
        name="video_file"
        type="file"
        accept="video/mp4,video/x-m4v,video/*"
      />
    </div>
    <div class="d-flex justify-content-center">
    <button class="btn btn-success w-25" type="submit" name="submit" id="submit">Încarcă</button>
    </div>
  </form>
    
  <br />
  <br />
  <div class="d-flex justify-content-center" id="loading">
    <div class="spinner-border" role="status">
    </div>
  </div>
    
  {% if url %}
    <div class="d-flex justify-content-center mt-5" id="video">
      <video controls width="640" height="640" autplay="false">
        <source src="{{url}}" type="video/mp4">
      </video>
    </div>
    <br/>
  {% endif %}
    
  <script>
    const form = document.getElementById('form')
    
    form.addEventListener('submit', (event) => {
        document.getElementById("loading").style.visibility = 'visible'
        document.getElementById('submit').disabled = true
    })
    
    addEventListener('load', (event) => {
      document.getElementById("loading").style.visibility = 'hidden'
      document.getElementById('submit').disabled = false
    })
  </script>
{% endblock %}
    